window.lpTag=window.lpTag||{};lpTag.taglets=lpTag.taglets||{};lpTag._tagv="4.1.15";!function(a,b){function c(c,d,e){b._logcnt=b._logcnt||0;I(c,d,e,b._logcnt);if("undefined"!=typeof a.lpTaglogListeners&&a.lpTaglogListeners.constructor===Array)for(var f=0;f<lpTaglogListeners.length;f++)try{lpTaglogListeners[f](c,d,e,b._logcnt)}catch(g){I("Exception="+g.message+" msg="+c,d,e,b._logcnt)}b._logcnt++}function d(a){if(a)for(var b=0;b<a.length;b++)ra[a[b].service]=a[b].baseURI}function e(){for(var a=Ha.PRODUCTION,c=b.ovr&&b.ovr.domain,d=0;d<Ia.length;d++)if(Ia[d].tagDomain===c){a=Ia[d].env;break}return a}function f(a){var c;a=a||e();if("string"==typeof a)for(var d=0;d<Ia.length;d++)if(Ia[d].env===a&&(b.tagletsPrecomputed&&Ia[d].tagletsPrecomputed||!b.tagletsPrecomputed&&!Ia[d].tagletsPrecomputed)){c=Ia[d].tagDomain;break}return c}function g(a){var b=ra[a],c="ALL";return b?b:ra[c]}function h(){return ra}function i(a){return l(sa,a)}function j(a){return l(ta,a)}function k(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])}function l(a,b){var c;c="undefined"!=typeof b?"undefined"!=typeof a[b]?a[b]:null:$(a);return c}function m(){var a=new b.Events,c=a.trigger,d=!1;a.trigger=function(a,e,f){var g=a;"string"==typeof a&&(g={eventName:e,appName:a,data:f});if("LPT"===g.appName&&"DOM_READY"===g.eventName){if(d)return;d=!0}"undefined"!=typeof b._deferExecuted?c(g):b.defer(function(){c(g)},1)};return a}function n(a){va.taglets=va.taglets||{};if(a){N(a,va.taglets);Q(a,va.taglets)}P(va);R();da.trigger("LPTAG","ON_READY");a&&T(a,va.taglets);da.trigger("LPTAG","ON_STARTED")}function o(a){if(a){Q(a,{},!0);T(a,{},!0)}}function p(){return la}function q(){return ma}function r(){return na}function s(){return Ba[ma]}function t(){return za[la]}function u(){return oa}function v(){return pa}function w(){return Da[oa]}function x(){if(!b.started){b.started=!0;aa()}}function y(a,c){if(!a)return!1;b.url=a;c=c||{};c.taglets=c.taglets||{};b.section=c.section||b.section;b.tagletSection=c.tagletSection||b.tagletSection;va=c;M(c.taglets);wa=!0;aa();return!0}function z(a){if(a&&a.name){a.excludeWhitelist=!0;A(a)}}function A(a){var c;a=a||{};if(b.taglets&&b.taglets.jsonp){c={url:F(a),success:J(a),error:K(a)};b.taglets.jsonp.issueCall(c)}}function B(){if(a.location&&a.location.search){var c=a.location.search.match(/lpDebug=(?=(\d))/);c&&c[1]&&(b.debug=c[1])}if(!b.isDom&&("interactive"===document.readyState||"complete"===document.readyState)){b.isDom=!0;da.trigger("LPT","DOM_READY")}"undefined"!=typeof a._lptTagStop||"undefined"!=typeof b.autoStart&&!b.autoStart||x()}function C(a){try{if(a){var e=qa.retry;if(a.retry)ba(e,a.retry,!0,aa);else if(!b.loaded||wa){wa=!1;b.loaded=!0;e.count=0;b.site=a.site||b.site;d(a.serviceMap);k(sa,a.features);k(ta,a.settings);setTimeout(function(){n(a.taglets)},0);if(qa.count>1){var f=qa.count-2;ca(qa.scriptPrefix+f)}}if(a.error){c("callback error ,Error:"+JSON.stringify(a.error),"ERROR","LPTAG");da.trigger("LPTAG","CB_ERROR",{err:a.error})}}else{c("callback error, no response","ERROR","LPTAG");da.trigger("LPTAG","CB_ERROR",{err:"no response"});R()}}catch(g){c("callback has failed "+g.message,"ERROR","LPTAG");da.trigger("LPTAG","CB_EXCEPTION",{err:g.message});R()}}function D(a,c){b.log("Error creating taglet:"+a+" ex="+c.message,"ERROR","LPTAG")}function E(a){try{var d=new URL(a),e=[],f={lpvid:b.taglets.lp_monitoringSDK.getVid(),lpsid:b.taglets.lp_monitoringSDK.getSid(),lpjwt:b.taglets.unAuthMessaging.getJwt()};for(var g in f)e.push(g+"="+f[g]);d.hash=e.join("&");return d.toString()}catch(h){c("Error getting cross domain URL: "+h.message,"ERROR","LPTAG");return a}}function F(a){a=a||{};var c={};c[b.site]&&(b.tagletsPrecomputed=c[b.site].tagletsPrecomputed);if(b.tagletsPrecomputed)return b.protocol+"//"+(b.ovr&&b.ovr.domain?b.ovr.domain:"cdn.lpsnmedia.net")+"/api/account/"+b.site+"/taglets/scopes/"+(wa?"default/onwindowclose":"default/onpageload");var d="?v=2.0&df="+b.device.family(),e=a.lpDebug||b.debug,f=a.whitelist||b.wl,g=a.scp||b.scp,h=_(ua),i=G(),j=b.protocol+"//"+(b.ovr&&b.ovr.domain?b.ovr.domain:"lptag.liveperson.net")+"/lptag/api/account/"+b.site+"/configuration/applications/taglets/.jsonp";g&&(d+="&scp="+g);if(!a.excludeWhitelist&&f){f=f.constructor===Array?f:[f];d+="&wl="+encodeURIComponent(f.join(","))}if(a.name){a.name=a.name.constructor===Array?a.name:[a.name];d+="&byName="+encodeURIComponent(a.name.join(","))}(1==e||2==e)&&(d+="&lpDebug="+e);h.length&&(d+="&ct="+encodeURIComponent(h.join(",")));i&&(d+="&s="+encodeURIComponent(i));Ca&&(d+="&b="+oa);return j+d}function G(){var a;b.tagletSection?a=b.tagletSection:"object"!=typeof b.section&&b.section?a=b.section:b.section&&b.section.constructor===Array&&1===b.section.length&&"object"!=typeof b.section[0]&&b.section[0]&&(a=b.section[0]);return a}function H(a){return Fa.match(a)?!0:!1}function I(b,c,d,e){"undefined"!=typeof a.lpMTagDebug&&"function"==typeof lpMTagDebug.Display&&a.lpMTagDebug.Display(b,c,d,e)}function J(a){return function(b){var d,e;if(b&&!b.error){e=qa.retry;if(b.retry)ba(e,b.retry,!1,function(){A(a)});else if(b.taglets){e.count=0;b.taglets.constructor!==Array&&(b.taglets=[b.taglets]);setTimeout(function(){o(b.taglets);L(a.success,a.context)},0)}else L(a.success,a.context)}else{d=b&&b.error?"response error: "+JSON.stringify(b.error):"no response";c("callback error, "+d,"ERROR","LPTAG");L(a.error,a.context,d)}}}function K(a){return function(b){L(a.error,a.context,b)}}function L(b,d){d=d||a;if("function"==typeof b){var e=Array.prototype.slice.call(arguments,2);try{return b.apply(d,e)}catch(f){c("Failed to execute callback exc= "+f.message,"ERROR","LPTAG")}}}function M(a){for(var d in ua)if(ua.hasOwnProperty(d)&&ua[d]!==xa.STOPPED){var e=b.taglets[d];if(d&&e)try{if("function"==typeof e.onBeforeNavigation){c("onBeforeNavigation taglet: "+d,"DEBUG","LPTAG");e.onBeforeNavigation(a[d])}}catch(f){c("Error onBeforeNavigation taglet :"+d+"ex= "+f.message,"ERROR","LPTAG")}else c("onBeforeNavigation not called on non-JS taglet: "+d,"DEBUG","LPTAG")}}function N(a,d){for(var e in ua)if(ua.hasOwnProperty(e)&&ua[e]!==xa.STOPPED&&O(a,e)){var f=b.taglets[e];if(e&&f)try{if("function"==typeof f.stop){c("Stop taglet: "+e,"DEBUG","LPTAG");f.stop(d[e])}ua[e]=xa.STOPPED;da.trigger("LPTAG","TAGLET_STOPPED",{name:e})}catch(g){c("Error stop taglet :"+e+"ex= "+g.message,"ERROR","LPTAG")}else c("Stop not called on non-JS taglet: "+e,"DEBUG","LPTAG")}}function O(a,b){for(var c=!0,d=0;d<a.length;d++)if(a[d].name===b){c=!1;break}return c}function P(a){a.sdes&&a.sdes.length&&b.sdes.push(a.sdes)}function Q(a,d,e){for(var f=0;f<a.length;f++){var g=b.taglets[a[f].name];if(a[f].name&&g)if(ua[a[f].name]){if(!e)try{if("function"==typeof g.reinit){c("Reinit taglet: "+a[f].name,"DEBUG","LPTAG");g.reinit(a[f].parameters,d[a[f].name]);da.trigger("LPTAG","TAGLET_REINITIALIZED",{name:a[f].name})}}catch(h){c("Error reinit taglet :"+a[f].name+"ex= "+h.message,"ERROR","LPTAG")}}else try{c("Init taglet: "+a[f].name,"DEBUG","LPTAG");g.init(a[f].parameters);da.trigger("LPTAG","TAGLET_INITIALIZED",{name:a[f].name})}catch(h){c("Error init taglet:"+a[f].name+"  ex="+h.message,"ERROR","LPTAG")}else c("Init not called on non-JS taglet: "+a[f].name,"DEBUG","LPTAG")}}function R(){b._deferExecuted=!0;b.defer=function(a){try{a()}catch(b){c("Error executing defer fn:"+b.message,"ERROR","LPTAG")}};S(b._defB);S(b._defT);S(b._defL)}function S(a){if("undefined"!=typeof a){for(var b=0;b<a.length;b++)try{a[b]()}catch(d){c("Error executing defer fn:"+d.message,"ERROR","LPTAG")}a.length=0}}function T(a,d,e){for(var f=0;f<a.length;f++){var g=b.taglets[a[f].name];if(a[f].name&&g){if(ua[a[f].name]){if(!e)try{if("function"==typeof g.restart){c("Restart taglet: "+a[f].name,"DEBUG","LPTAG");g.restart(d[a[f].name])}da.trigger("LPTAG","TAGLET_RESTARTED",{name:a[f].name})}catch(h){c("Error restart taglet :"+a[f].name+"ex= "+h.message,"ERROR","LPTAG")}}else try{if("function"==typeof g.start){c("Start taglet: "+a[f].name,"DEBUG","LPTAG");g.start()}da.trigger("LPTAG","TAGLET_STARTED",{name:a[f].name})}catch(h){c("Error start taglet :"+a[f].name+"ex= "+h.message,"ERROR","LPTAG")}ua[a[f].name]=xa.STARTED}else{c("Start not called on non-JS taglet: "+a[f].name,"DEBUG","LPTAG");a[f].name&&!ua[a[f].name]&&(ua[a[f].name]=xa.STOPPED)}}}function U(){var a=ya.desktop;ea&&!fa?a=ya.mobile:!fa&&!ka||X()?fa&&X()&&ga&&(Y()||(a=ya.tablet)):a=ya.tablet;return a}function V(){var a=Aa.windows;ha&&!ea?a=Aa.mac:ka?a=Aa.android:ja?a=Aa.iOS:ia&&(a=Aa.linux);return a}function W(){var a=Ca.unknown;Ea?a=Ca.oldie:Ga.browser===Ga.BROWSERS.IE?a=Ca.ie:Ga.browser===Ga.BROWSERS.LINE?a=Ca.line:Ga.browser===Ga.BROWSERS.CHROMEIOS?a=Ca.chromeios:Ga.browser===Ga.BROWSERS.OPERA?a=Ca.opera:Ga.browser===Ga.BROWSERS.EDGE?a=Ca.edge:Ga.browser===Ga.BROWSERS.CHROME?a=Ca.chrome:Ga.browser===Ga.BROWSERS.BLACKBERRY?a=Ca.blackberry:Ga.browser===Ga.BROWSERS.FF?a=Ca.firefox:Ga.browser===Ga.BROWSERS.SAFARI&&(ha||ja||ma===Aa.windows)?a=Ca.safari:ka&&(a=Ca.android);return a}function X(){var a,b=!1,c=document.documentMode;a=/*@cc_on!@*/b;if(!a){Z("");a="number"==typeof document.documentMode;Z(c)}!a&&navigator&&navigator.userAgent&&(a="Netscape"===navigator.appName&&/Trident\/.*rv:([0-9]{1,}[.0-9]{0,})/.test(navigator.userAgent));return a}function Y(){return H(/Trident\/.*rv:(11)/)}function Z(a){try{document.documentMode=a}catch(b){}}function $(a){var b={};for(var c in a)b[c]=a[c];return b}function _(a){var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(c);return b}function aa(){b.load(F(),"UTF-8",qa.scriptPrefix+qa.count);qa.count++}function ba(a,b,d,e){if(d){var f=qa.count-1;ca(qa.scriptPrefix+f)}isNaN(b.maxRetries)||(a.max=parseInt(b.maxRetries,10));isNaN(b.timeout)||(a.timeout=parseInt(b.timeout,10));if(a.count<a.max){c("retrying count="+a.count+" max="+a.max,"DEBUG","LPTAG");a.count++;setTimeout(function(){e()},a.timeout)}else{c("exceeded max retries: "+a.max+", stopping","ERROR","LPTAG");da.trigger("LPTAG","CB_ERROR",{err:"max retries",count:a.count})}}function ca(a){var b=document.getElementById(a);if(b)try{b.parentNode.removeChild(b);for(var d in b)b.hasOwnProperty(d)&&delete b[d]}catch(e){c("error removing script: "+a,"ERROR","LPTAG")}}a.lpTag=a.lpTag||{};!function(){function b(){k=!0;j.forEach(function(a){a&&"function"==typeof a.cb&&a.cb.call(a.etx||this)});j=[]}function c(a,b,c,d){var e=(a||[]).filter(function(a){return a&&a[c]&&(""+a[c]).match(b)});return e.length&&e[0][d]}function d(a,b){return a.match(b)?!0:!1}function e(a){return d(f,a)}var f=navigator.userAgent,g=navigator.userAgentData,h={OSX:"osx",LINUX:"linux",IOS:"ios",ANDROID:"android",WINDOWS:"windows"},i={IE:"ie",LINE:"line",CHROMEIOS:"chromeios",CHROME:"chrome",OPERA:"opera",BLACKBERRY:"blackberry",FF:"firefox",SAFARI:"safari",EDGE:"edge"},j=[],k=!1,l={OS:h,BROWSERS:i,ready:function(a,c){j.push({cb:a,ctx:c});k&&b()}},m=[{exp:/(iPhone|iPod|iPad)/g,id:h.IOS},{exp:/(Mac OS)/g,id:h.OSX},{exp:/(android|Android)/g,id:h.ANDROID},{exp:/(Linux)/g,id:h.LINUX},{exp:/(Windows|Win64)/g,id:h.WINDOWS}],n=[{exp:/MSIE|Trident|IEMobile/,id:i.IE},{exp:/Line/,id:i.LINE},{exp:/CriOS/,id:i.CHROMEIOS},{exp:/Opera|OPR/,id:i.OPERA},{exp:/Edg/,id:i.EDGE},{exp:/Chrome/,id:i.CHROME},{exp:/ BlackBerry /,id:i.BLACKBERRY},{exp:/Firefox/,id:i.FF},{exp:/Safari/,id:i.SAFARI}];l.isMobile=e(/(Windows Phone|iPhone|iPod|mobile|Mobile|IEMobile)/g);l.isTablet=e(/(Tablet PC|iPad|Tablet|tablet)/g);l.isTouch=e(/(Touch)/g);for(var o=0;o<m.length;++o)if(e(m[o].exp)){l.os=m[o].id;break}for(var o=0;o<n.length;++o)if(e(n[o].exp)){l.browser=n[o].id;break}if(g){var p=[{exp:/Chrome/,id:i.CHROME},{exp:/CriOS/,id:i.CHROMEIOS},{exp:/Opera|OPR/,id:i.OPERA},{exp:/Line/,id:i.LINE},{exp:/BlackBerry/,id:i.BLACKBERRY},{exp:/Firefox|FireFox/,id:i.FF},{exp:/Safari/,id:i.SAFARI},{exp:/Edge/,id:i.EDGE}],q=[{exp:/(Mac OS)/g,id:h.OSX},{exp:/(Linux)/g,id:h.LINUX},{exp:/(iPhone|iPod|iPad|iOS|IOS)/g,id:h.IOS},{exp:/(android|Android)/g,id:h.ANDROID},{exp:/(Windows|Win64)/g,id:h.WINDOWS}];l.isMobile=g.mobile;for(var r=g.brands.map(function(a){return a.brand}).join("|"),o=0;o<p.length;++o)if(d(r,p[o].exp)){l.browser=p[o].id;l.browserVersion=c(g.brands,p[o].exp,"brand","version");break}g.getHighEntropyValues(["platform","platformVersion","architecture","model","uaFullVersion"]).then(function(a){for(var c=0;c<q.length;++c)if(d(a.platform,q[c].exp)){l.os=q[c].id;l.osVersion=a.platformVersion;break}d(a.model||"",/(Tablet PC|iPad|Tablet|tablet)/g)&&(l.isTablet=!0);b()})}else b();a.lpTag._userAgentResolver=l}();var da,ea,fa,ga,ha,ia,ja,ka,la,ma,na,oa,pa,qa={retry:{count:0,max:3,timeout:1e3},scriptPrefix:"_lpTagScriptId_",count:0},ra=[],sa={},ta={},ua={},va={},wa=!1,xa={STARTED:1,STOPPED:2},ya={desktop:0,tablet:1,mobile:2},za=["Desktop","Tablet","Mobile"],Aa={windows:0,mac:1,linux:2,iOS:3,android:4},Ba=["Windows","Mac OSX","Linux","iOS","Android"],Ca={ie:0,chrome:1,safari:2,firefox:3,line:4,chromeios:5,oldie:6,blackberry:7,opera:8,android:9,unknown:10,edge:11},Da=["MSIE","Chrome","Safari","Firefox","Line","ChromeIOS","IE<9","BlackBerry","Opera","Android","Unknown","Edge"],Ea=!a.addEventListener,Fa=navigator.userAgent,Ga=b._userAgentResolver,Ha={ALPHA:"alpha",QA:"qa",PRODUCTION:"prod",DEV:"dev"},Ia=[{env:Ha.ALPHA,tagDomain:"lptag-a.liveperson.net"},{env:Ha.ALPHA,tagDomain:"cdn-a.lpsnmedia.net",tagletsPrecomputed:!0},{env:Ha.PRODUCTION,tagDomain:"lptag.liveperson.net"},{env:Ha.PRODUCTION,tagDomain:"cdn.lpsnmedia.net",tagletsPrecomputed:!0},{env:Ha.QA,tagDomain:"lptag-dev.dev.lprnd.net"},{env:Ha.QA,tagDomain:"tlv_plankton3.dev.lprnd.net"},{env:Ha.QA,tagDomain:"tlv_plankton4.dev.lprnd.net"},{env:Ha.QA,tagDomain:"cdn-qa.lpsnmedia.net",tagletsPrecomputed:!0},{env:Ha.DEV,tagDomain:"object"==typeof b.configurationDefaults&&b.configurationDefaults.tagDomain}];Ga.ready(function(){ea=Ga.isMobile;fa=Ga.isTablet;ga=Ga.isTouch;ha=Ga.os===Ga.OS.OSX;ia=Ga.os===Ga.OS.LINUX;ja=Ga.os===Ga.OS.IOS;ka=Ga.os===Ga.OS.ANDROID;la=U();ma=V();na=Ga.osVersion;oa=W();pa=Ga.browserVersion},this);!function(a,b){"use strict";if("object"==typeof exports)b(a,exports);else{a.Chronos=a.Chronos||{};b(a,a.Chronos)}}("undefined"==typeof a.lpTag?this:a.lpTag,function(a,b,c){"use strict";function d(a,b,c){var d=[];if(a[b]&&a[b].length)for(var e=0;e<a[b].length;e++)c&&"*"!==a[b][e].appName&&a[b][e].appName!==c||d.push(a[b][e]);if(a["*"])for(var f=0;f<a["*"].length;f++)c&&"*"!==a["*"][f].appName&&a["*"][f].appName!==c||d.push(a["*"][f]);return d}function e(b,c,d){a&&"function"==typeof a.log&&a.log(b,c,d)}function f(a){var b,c=a.unbindObj[a.attrName],d=!1;if(!a.unbindObj){e("CMD listen id not spec for unbind","ERROR",a.loggerName);return null}if("string"==typeof a.unbindObj)return j(a.lstnrs,a.unbindObj);if(!a.unbindObj.func&&!a.unbindObj.context&&!a.unbindObj.appName)return!1;var f=a.lstnrs;if(c){f={};f[c]=a.lstnrs[c]}for(var g in f)if(f.hasOwnProperty(g)&&f[g]&&f[g].length){b=k(f[g],a.unbindObj.func,a.unbindObj.context,a.unbindObj.appName);if(b.length!==f[g].length){a.lstnrs[g]=b;d=!0}}return d}function g(a){var b={};if(a.constructor===Object)for(var c in a)a.hasOwnProperty(c)&&null!==a[c]&&void 0!==a[c]&&("object"==typeof a[c]&&a[c].constructor!==Array?b[c]=g(a[c]):a[c].constructor===Array?b[c]=a[c].slice(0)||[]:"function"!=typeof a[c]&&(b[c]=null!==a[c]&&void 0!==a[c]?a[c]:""));else a.constructor===Array?b=a.slice(0)||[]:"function"!=typeof a&&(b=a);return b}function h(a,b,c){if(("undefined"==typeof c||"*"===c)&&"*"===b)return a;for(var d=[],e=0;e<a.length;e++)(a[e].eventName===c||"*"===c)&&(b&&b===a[e].appName||!a[e].appName||"*"===a[e].appName||"*"===b)&&d.push(a[e]);return d}function i(a){if(0===a.eventBufferLimit||a.triggerData.data&&a.triggerData.data.doNotStore)a=null;else{var b={eventName:a.triggerData[a.attrName],appName:a.triggerData.appName};b.data=a.triggerData.passDataByRef?a.triggerData.data:g(a.triggerData.data);if(a.eventBufferLimit>0){a.index>=a.eventBufferLimit&&(a.index=0);a.fired[a.index]=b;a.index++}else a.fired.push(b);a=null}}function j(a,b){var c=!1;if(!b){e("Ev listen id not spec for unregister","ERROR","Events");return null}for(var d in a)if(a.hasOwnProperty(d))for(var f=0;f<a[d].length;f++)if(a[d][f].id==b){a[d].splice(f,1);e("Ev listen="+b+" and name="+d+" unregister","DEBUG","Events");c=!0;break}c||e("Ev listen not found "+b+" unregister","DEBUG","Events");return c}function k(a,b,c,d){var f=[];if(a&&a.length)for(var g=0;g<a.length;g++)try{var h=!c&&a[g].func===b,i=!b&&c&&a[g].context===c,j=b&&c&&a[g].func===b&&a[g].context===c,k=d&&d===a[g].appName,l="*"===a[g].appName;if(h||i||j){if(k||l)continue;if(i)continue}else if(!b&&!c&&k)continue;f.push(a[g])}catch(m){e("Error in unbind e="+m.message,"ERROR","Events")}return f}var l={getListeners:d,log:e,unbind:f,hasFired:h,cloneEventData:g,storeEventData:i};c||(b.EventsUtil=b.EventsUtil||l);return l});!function(a,b){"use strict";if("object"==typeof exports)b(a,exports,require("./util/EventsUtil").EventsUtil);else{a.Chronos=a.Chronos||{};b(a,a.Chronos,a.Chronos.EventsUtil)}}("undefined"==typeof a.lpTag?this:a.lpTag,function(a,b,c,d){"use strict";function e(a){function b(a){if(a){a.triggerOnce=!0;return d(a)}return null}function d(a,b,e){var f=a;"string"==typeof a&&(f={appName:a,eventName:b,func:e});f.appName=f.appName||l;"*"!==l&&("string"!=typeof a||"function"!=typeof b&&"undefined"!=typeof b||(f.eventName=a));if(!f.eventName||!f.func||"function"!=typeof f.func&&f.func.constructor!==Array){c.log("Ev listen has invalid params: evName=["+f.eventName+"]","ERROR","Events");return null}if(f.func.constructor===Array){for(var g,h,i=[],j=0;j<f.func.length;j++){g=c.cloneEventData(f);g.func=f.func[j];h=d(g);i.push(h)}return i}var k=r+o++,m={id:k,func:f.func,context:f.context||null,aSync:f.aSync?!0:!1,appName:f.appName,triggerOnce:f.triggerOnce||!1};p[f.eventName]=p[f.eventName]||[];p[f.eventName].push(m);c.log("Ev listen rgstr: evName=["+f.eventName+"] aSync="+m.aSync+" appName="+m.name,"DEBUG","Events");f=null;a=null;return k}function e(a){"*"!==l&&(a.appName=a.appName||l);return c.unbind({unbindObj:a,attrName:n,loggerName:m,lstnrs:p})}function f(a,b){if("undefined"==typeof b){b=a;a=l}return c.hasFired(q,a,b)}function g(a,b,d){var e=a;"string"==typeof a&&(e={eventName:b,appName:a,data:d});if("*"!==l){e.appName=e.appName||l;"string"!=typeof a||"object"!=typeof b&&"undefined"!=typeof b||(e.eventName=a)}if(!e||"undefined"==typeof e.eventName){c.log("Ev name not spec for publish","ERROR","Events");e=null;return null}e.passDataByRef=e.passDataByRef||!j;i(e);var f=c.getListeners(p,e.eventName,e.appName);if(f.length>0)for(var g=0;g<f.length;g++){var k=e.passDataByRef?e.data:c.cloneEventData(e.data),m={appName:e.appName,eventName:e.eventName},n=f[g];n.aSync||k&&k.aSync?setTimeout(h(n,k,m),0):h(n,k,m)()}e=null;return f.length>0}function h(a,b,d){return function(){try{a.func.call(a.context,b,d);b=null;a.triggerOnce&&e(a);a=null}catch(f){c.log("Error executing "+d.eventName+" eventId: "+a.id+"e="+f.message,"ERROR","Events")}}}function i(a){c.storeEventData({triggerData:a,eventBufferLimit:k,attrName:n,fired:q,index:s})}var j,k,l,m="Events",n="eventName",o=0,p={},q=[],r="evId_",s=0;l=a&&a.appName||"*";j=a&&"boolean"==typeof a.cloneEventData?a.cloneEventData:!1;k=a&&!isNaN(a.eventBufferLimit)?a.eventBufferLimit:-1;this.once=b;this.hasFired=f;this.trigger=g;this.publish=g;this.bind=d;this.register=d;this.unbind=e;this.unregister=e}d||(b.Events=b.Events||e);return e});b.Events=b.Events||b.Chronos.Events;a.lpTag=a.lpTag||{};b.storageMethods=b.storageMethods||function(){"use strict";function a(){return l&&m}function b(){return l}function c(){return m}function d(a,c){if(b()){sessionStorage.setItem(a,c);return!0}}function e(a){return b()?sessionStorage.getItem(a)||"":void 0}function f(a){if(b()&&e(a)){sessionStorage.removeItem(a);return!0}return!1}function g(a,b){if(c()){localStorage.setItem(a,b);return!0}}function h(a){return c()?localStorage.getItem(a)||"":void 0}function i(a){if(c()&&h(a)){localStorage.removeItem(a);return!0}return!1}function j(){try{l=k(sessionStorage);m=k(localStorage)}catch(a){}}function k(a){var b=!1,c="lpTestCase",d="abc";try{if("undefined"!=typeof Storage){a.setItem(c,d);b=a.getItem(c)===d;a.removeItem(c)}}catch(e){}return b}var l=!1,m=!1;j();return{isStorageEnabled:a,isSessionStorageEnabled:b,isLocalStorageEnabled:c,setSessionData:d,getSessionData:e,removeSessionData:f,setPersistentData:g,getPersistentData:h,removePersistentData:i}}();a.lpTag=a.lpTag||{};b.cookieMethods=b.cookieMethods||function(){"use strict";function a(){return navigator.userAgent.match(/Chrome/)?!0:!1}function b(){var b="lpTestCookie"+(new Date).getTime(),d="testValue";i({name:b,value:d,sameSite:"none",secure:!0,partitioned:!0});k=d===f(b);j(b,null,null,!0,"none",!0);!k&&a()&&c();m=!1;return k}function c(){var a="lpTestCookie"+(new Date).getTime(),b="testValue";i({name:a,value:b,sameSite:"none",secure:!0,partitioned:!0});l=b===f(a);j(a,null,null,!0,"none",!0);return l}function d(){return k}function e(){return l}function f(a){var b,c,d="; ",e="";if(m||k||l){if("string"!=typeof a)return"";a=encodeURIComponent(a);try{c=d+document.cookie}catch(f){}b=c.split(d+a+"=");e=1==b.length?"":decodeURIComponent(b[1].split(";")[0])}return e}function g(a,b,c){c="number"==typeof c?c:2592e3;"object"==typeof a&&(a.seconds=c);return h(a,b,c)}function h(a,b,c,d,e,f,g,h){return i("object"==typeof a?a:{name:a,value:b,seconds:c,path:d,domain:e,secure:f,sameSite:g,partitioned:h})}function i(a){var b,c,d=!1;if(m||k||l&&a.secure&&"none"===a.sameSite){if("string"!=typeof a.name||""===a.name)return!1;(null===a.value||"undefined"==typeof a.value)&&(a.seconds=-1);if("number"==typeof a.seconds){c=(new Date).getTime();b=new Date(c+1e3*a.seconds)}a.value=a.value?encodeURIComponent(a.value):"";try{document.cookie=[encodeURIComponent(a.name),"=",a.value,b?"; expires="+b.toUTCString():"",a.path?"; path="+a.path:"",a.domain?"; domain="+a.domain:"",a.secure?"; secure":"",a.sameSite?"; samesite="+a.sameSite:"",a.partitioned?"; partitioned":""].join("");d=!0}catch(e){}}return d}function j(a,b,c,d,e,f){return i({name:a,path:b,domain:c,secure:d,sameSite:e,partitioned:f})}var k=!1,l=!1,m=!0;b();return{clearCookie:j,writeSessionCookie:h,writePersistentCookie:g,readCookie:f,isCookieEnabled:d,isChromeThirdPartyEnabled:e}}();b.cfg=qa;b.log=c;b.csds={getDomain:g,setDomains:d,getCSDSMap:h};b.features={getFeature:i};b.siteSettings={getSetting:j};b.getEnv=e;b.getTagDomain=f;b.getDomain=g;b.eventsFactory=m;b.tglMng={run:n,runtTaglet:o};b.device={os:q,osEnum:$(Aa),osName:s,osVersion:r,family:p,familyEnum:$(ya),familyName:t,browser:u,browserName:w,browserVersion:v,browserEnum:$(Ca)};b.start=x;b._reload=aa;b.newPage=y;b.loadTaglet=z;b.loadTaglets=A;b.callback=C;b.handleGeneralError=D;b.run=B;b.hooks=b.hooks||[];b.getCrossDomainUrl=E;da=m();b.events=da;a.lpTag=a.lpTag||{};b.taglets=b.taglets||{};b.taglets.fetch=b.taglets.fetch||function(a){function c(){if(T.lpAjax&&T.lpAjax.addTransport){C=T.lpAjax;try{C.addTransport(H,U)}catch(a){}}A()}function d(a){if(a&&a.defaults)for(var b in a.defaults)a.defaults.hasOwnProperty(b)&&G.hasOwnProperty(b)&&(G[b]=a.defaults[b]);c();S=!0}function e(a){a=h(a);var b=a&&a.url&&"string"==typeof a.url&&a.url.length<=M;return S&&b}function f(a){return e(a)?q(a):v(a.error,L,a.context)}function g(){return{name:H,version:I,callsMade:N,errorsFound:O,pending:Q.length,defaults:JSON.parse(t(G))}}function h(a){J!==k(a.url)&&(a=i(a));a.method=a.method||G.method;a.credentials=a.credentials||G.credentials;a.encoding=a.encoding||G.encoding;a.mimeType=a.mimeType||G.mimeType;a.retries=isNaN(a.retries)?G.retries:a.retries;a.timeout=isNaN(a.timeout)?G.timeout:a.timeout;a.XMLHTTPOverride="boolean"==typeof a.XMLHTTPOverride?a.XMLHTTPOverride:G.XMLHTTPOverride;a.asynch="boolean"==typeof a.asynch?a.asynch:G.asynch;if((a.method.toLowerCase()===E.PUT.toLocaleLowerCase()||a.method.toLowerCase()===E.DELETE.toLocaleLowerCase())&&a.XMLHTTPOverride){a.headers[K]=a.method;a.method=E.POST}return a}function i(a){a.headers||(a.headers={});a.headers["Access-Control-Request-Method"]=a.method;a.headers["Access-Control-Request-Headers"]=a.headers["Access-Control-Request-Headers"]||G.accessHeader;a.headers.Origin=a.headers.Origin||J;return a}function j(a){var b=a.url.indexOf("__d=");b>-1&&(a.url=a.url.substr(0,b-1));if(!a.cache&&(a.method.toLowerCase()!==E.GET.toLowerCase()||a.url.length<=M-10)){a.url+=a.url.indexOf("?")>0?"&__d=":"?__d=";a.url+=Math.floor(1e5*Math.random())}}function k(b){var c,d=new RegExp(/(http{1}s{0,1}?:\/\/)([^\/\?]+)(\/?)/gi),e=null;c=0===b.indexOf("http")?d.exec(b):d.exec(a.location.href);c&&c.length>=3&&""!==c[2]&&(e=c[1].toLowerCase()+c[2].toLowerCase());return e}function l(c){var d,e,f;try{d=new AbortController}catch(g){d=null;w("Old browser - AbortController is not available: "+g,F.ERROR,"fetch:_send")}d&&(e=d.signal);if(c.query){c.url=o(c.url,c.query);c.query=null}if(c.method===E.GET&&c.data){c.url=o(c.url,c.data);c.data=null}else"undefined"!=typeof c.data&&(c.body=s(c.data));if(c.timeout&&d&&e){c.signal=e;c.abortController=d;f=m(c)}j(c);p(c);fetch(c.url,c).then(function(a){f&&clearTimeout(f);if(a.ok)return n(a,c);w("Unable to fetch due to a backend error. Status "+a.status,F.ERROR,"_send");y(c);if(!(c.retries>0))return n(a,c);--c.retries;l(c)})["catch"](function(d){var e=b&&b.taglets&&b.taglets.lpFrontendMetrics,g="Fetch blocked by CSP or Network";d=d||{};w("Unable to fetch due to a network/csp error: "+d,F.ERROR,"_send");f&&clearTimeout(f);y(c);e&&"function"==typeof e.sendLog&&e.sendLog("ERROR",g,{requestUrl:c.url,pageUrl:a.location.href});d.cspOrNetworkError=!0;return c.error(d)})}function m(a){return setTimeout(function(){a.controller.abort()},a.timeout)}function n(a,b){var c=a;return a.json().then(function(a){var d={body:a,responseCode:c.status,headers:c.headers,HTTPStatus:c.statusText};y(b);if(c.status>=400){w("Response error: ",F.ERROR,"_parseResponse");return b.error(d)}w("Response Success: ",F.INFO,"_parseResponse");return b.success(d)})["catch"](function(a){w("Unable to parse response: "+a,F.ERROR,"_parseResponse");var d={body:{},responseCode:c.status,headers:c.headers,HTTPStatus:c.statusText};y(b);if(c.status>=400){w("Response error: ",F.ERROR,"_parseResponse");return b.error(d)}w("Response Success: ",F.INFO,"_parseResponse");return b.success(d)})}function o(a,b){var c;c=r(b);if(c){a+=a.indexOf("?")<0?"?":"&";a+=c}return a}function p(a){a.launchTime=new Date;Q.push(a);x()}function q(a){P.push(a);u()}function r(a){var b="";if("string"==typeof a)b+=a;else{var c=!0;for(var d in a)if(a.hasOwnProperty(d)){var e;"object"==typeof a[d]?e=t(a[d]):"function"!=typeof a[d]&&(e=a[d]);if("undefined"!=typeof e){c||(b+="&");b+=encodeURIComponent(d)+"="+encodeURIComponent(e);c=!1}}}return b}function s(a){return"object"==typeof a?t(a):"string"==typeof a?a:""}function t(a){var b;if("function"==typeof Array.prototype.toJSON){var c=Array.prototype.toJSON;delete Array.prototype.toJSON;try{b=JSON.stringify(a)}catch(d){Array.prototype.toJSON=c;throw d}Array.prototype.toJSON=c}else b=JSON.stringify(a);return b}function u(){for(;Q.length<6&&P.length>0;)l(P.shift())}function v(a,b,c){if(a&&"function"==typeof a)try{a.call(c,b)}catch(d){w(d.message,"error")}}function w(c,d){a.lpTag&&b.log&&b.log(c,d,H)}function x(){N+=1}function y(a){for(var b=0;b<Q.length;b++)if(Q[b]===a){Q.splice(b,1);P.length>0&&u();break}}function z(){var a;if(T&&T.lpAjax&&T.lpAjax.publishMetrics&&R.length>0){C=T.lpAjax;a={tags:[{transport:H}],metrics:R};C.publishMetrics(a);R.length=0}A()}function A(){B&&clearTimeout(B);B=setTimeout(z,G.metricsTimeout)}var B,C,D={JSON:"application/json",JAVASCRIPT:"text/javascript",HTML:"text/html",XMLAPP:"application/xml",XMLTEXT:"text/xml",FORM:"application/x-www-form-urlencoded;"},E={GET:"GET",POST:"POST",PUT:"PUT",PATCH:"PATCH",DELETE:"DELETE"},F={ERROR:"ERROR",DEBUG:"DEBUG",INFO:"INFO"},G={encoding:"UTF-8",method:E.GET,asynch:!0,timeout:3e4,mimeType:D.JSON,acceptHeader:"*/*",XMLHTTPOverride:!0,retries:2,metricsCount:100,metricsTimeout:6e4,credentials:"include",accessHeader:"Authorization"},H="fetch",I="1.0.2",J=k(document.location.href),K="X-HTTP-Method-Override",L={responseCode:600,HTTPStatus:"unable to service request",body:{error:"Transport - "+H+" - unable to run request"},headers:""},M=2083,N=0,O=0,P=[],Q=[],R=[],S=!0,T=b.taglets,U={init:c,name:H,v:I,configure:d,issueCall:f,isValidRequest:e,inspect:g};c();return U}(a);B()}(window,lpTag);